(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{6219:function(t){t.exports=(()=>{var t={6824:t=>{var e,i,s;/*!
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 * ECMAScript compliant, uniform cross-browser split method
 */t.exports=(i=String.prototype.split,s=/()??/.exec("")[1]===e,function(t,r,n){if("[object RegExp]"!==Object.prototype.toString.call(r))return i.call(t,r,n);var a,o,l,h,u=[],c=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),d=0,r=RegExp(r.source,c+"g");for(t+="",s||(a=RegExp("^"+r.source+"$(?!\\s)",c)),n=n===e?4294967295:n>>>0;(o=r.exec(t))&&(!((l=o.index+o[0].length)>d)||(u.push(t.slice(d,o.index)),!s&&o.length>1&&o[0].replace(a,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(o[t]=e)}),o.length>1&&o.index<t.length&&Array.prototype.push.apply(u,o.slice(1)),h=o[0].length,d=l,!(u.length>=n)));)r.lastIndex===o.index&&r.lastIndex++;return d===t.length?(h||!r.test(""))&&u.push(""):u.push(t.slice(d)),u.length>n?u.slice(0,n):u})},1804:(t,e,i)=>{"use strict";var s=i(5618),r=i(7205),n=i(7191),a=i(5516),o=i(9981);(t.exports=function(t,e){var i,r,l,h,u;return arguments.length<2||"string"!=typeof t?(h=e,e=t,t=null):h=arguments[2],s(t)?(i=o.call(t,"c"),r=o.call(t,"e"),l=o.call(t,"w")):(i=l=!0,r=!1),u={value:e,configurable:i,enumerable:r,writable:l},h?n(a(h),u):u}).gs=function(t,e,i){var l,h,u,c;return"string"!=typeof t?(u=i,i=e,e=t,t=null):u=arguments[3],s(e)?r(e)?s(i)?r(i)||(u=i,i=void 0):i=void 0:(u=e,e=i=void 0):e=void 0,s(t)?(l=o.call(t,"c"),h=o.call(t,"e")):(l=!0,h=!1),c={get:e,set:i,configurable:l,enumerable:h},u?n(a(u),c):c}},430:t=>{"use strict";t.exports=function(){}},7191:(t,e,i)=>{"use strict";t.exports=i(6560)()?Object.assign:i(7346)},6560:t=>{"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},7346:(t,e,i)=>{"use strict";var s=i(5103),r=i(2745),n=Math.max;t.exports=function(t,e){var i,a,o,l=n(arguments.length,2);for(a=1,t=Object(r(t)),o=function(s){try{t[s]=e[s]}catch(t){i||(i=t)}};a<l;++a)e=arguments[a],s(e).forEach(o);if(void 0!==i)throw i;return t}},6914:(t,e,i)=>{"use strict";var s=i(430)();t.exports=function(t){return t!==s&&null!==t}},5103:(t,e,i)=>{"use strict";t.exports=i(7446)()?Object.keys:i(6137)},7446:t=>{"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},6137:(t,e,i)=>{"use strict";var s=i(6914),r=Object.keys;t.exports=function(t){return r(s(t)?Object(t):t)}},5516:(t,e,i)=>{"use strict";var s=i(6914),r=Array.prototype.forEach,n=Object.create,a=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var e=n(null);return r.call(arguments,function(t){s(t)&&a(Object(t),e)}),e}},1290:t=>{"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function");return t}},2745:(t,e,i)=>{"use strict";var s=i(6914);t.exports=function(t){if(!s(t))throw TypeError("Cannot use null or undefined");return t}},9981:(t,e,i)=>{"use strict";t.exports=i(3591)()?String.prototype.contains:i(6042)},3591:t=>{"use strict";var e="razdwatrzy";t.exports=function(){return"function"==typeof e.contains&&!0===e.contains("dwa")&&!1===e.contains("foo")}},6042:t=>{"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},8832:(t,e,i)=>{"use strict";i(4167)("ev-store","7");var s="__EV_STORE_KEY@7";t.exports=function(t){var e=t[s];return e||(e=t[s]={}),e}},8370:(t,e,i)=>{"use strict";var s,r,n,a,o,l,h,u=i(1804),c=i(1290),d=Function.prototype.apply,p=Function.prototype.call,f=Object.create,m=Object.defineProperty,v=Object.defineProperties,g=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};s=function(t,e){var i;return c(e),g.call(this,"__ee__")?i=this.__ee__:(i=y.value=f(null),m(this,"__ee__",y),y.value=null),i[t]?"object"==typeof i[t]?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this},r=function(t,e){var i,r;return c(e),r=this,s.call(this,t,i=function(){n.call(r,t,i),d.call(e,this,arguments)}),i.__eeOnceListener__=e,this},o={on:s,once:r,off:n=function(t,e){var i,s,r,n;if(c(e),!g.call(this,"__ee__")||!(i=this.__ee__)[t])return this;if("object"==typeof(s=i[t]))for(n=0;r=s[n];++n)(r===e||r.__eeOnceListener__===e)&&(2===s.length?i[t]=s[n?0:1]:s.splice(n,1));else(s===e||s.__eeOnceListener__===e)&&delete i[t];return this},emit:a=function(t){var e,i,s,r,n;if(g.call(this,"__ee__")&&(r=this.__ee__[t])){if("object"==typeof r){for(e=1,i=arguments.length,n=Array(i-1);e<i;++e)n[e-1]=arguments[e];for(e=0,r=r.slice();s=r[e];++e)d.call(s,this,n)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(e=1,i=arguments.length,n=Array(i-1);e<i;++e)n[e-1]=arguments[e];d.call(r,this,n)}}}},h=v({},l={on:u(s),once:u(r),off:u(n),emit:u(a)}),t.exports=e=function(t){return null==t?f(h):v(Object(t),l)},e.methods=o},6226:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linear=function(t,e){var i,s,r=new Float32Array(t),n=t-1;for(i=0;i<t;i++)s=i/n,e>0?r[i]=s:r[i]=1-s;return r},e.exponential=function(t,e){var i,s,r=new Float32Array(t),n=t-1;for(i=0;i<t;i++)s=i/n,r[e>0?i:t-1-i]=Math.exp(2*s-1)/Math.exp(1);return r},e.sCurve=function(t,e){var i,s=new Float32Array(t),r=e>0?Math.PI/2:-(Math.PI/2);for(i=0;i<t;++i)s[i]=Math.sin(Math.PI*i/t-r)/2+.5;return s},e.logarithmic=function(t,e,i){var s,r,n=new Float32Array(t),a=0;for(r=0;r<t;r++)s=i>0?r:t-1-r,a=r/t,n[s]=Math.log(1+e*a)/Math.log(1+e);return n}},1114:(t,e,i)=>{"use strict";e.h7=e.Y1=e.Hp=e.Jl=e.t$=e._h=void 0,e.L7=function(t,e,i,s){switch(e){case r:l.call(t,i,s);break;case n:u.call(t,i,s);break;case a:d.call(t,i,s);break;case o:f.call(t,i,s);break;default:throw Error("Unsupported Fade type")}},e.Mt=function(t,e,i,s){switch(e){case r:h.call(t,i,s);break;case n:c.call(t,i,s);break;case a:p.call(t,i,s);break;case o:m.call(t,i,s);break;default:throw Error("Unsupported Fade type")}};var s=i(6226),r=e._h="sCurve",n=e.t$="linear",a=e.Jl="exponential",o=e.Hp="logarithmic";function l(t,e){var i=(0,s.sCurve)(1e4,1);this.setValueCurveAtTime(i,t,e)}function h(t,e){var i=(0,s.sCurve)(1e4,-1);this.setValueCurveAtTime(i,t,e)}function u(t,e){this.linearRampToValueAtTime(0,t),this.linearRampToValueAtTime(1,t+e)}function c(t,e){this.linearRampToValueAtTime(1,t),this.linearRampToValueAtTime(0,t+e)}function d(t,e){this.exponentialRampToValueAtTime(.01,t),this.exponentialRampToValueAtTime(1,t+e)}function p(t,e){this.exponentialRampToValueAtTime(1,t),this.exponentialRampToValueAtTime(.01,t+e)}function f(t,e){var i=(0,s.logarithmic)(1e4,10,1);this.setValueCurveAtTime(i,t,e)}function m(t,e){var i=(0,s.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(i,t,e)}e.Y1="FadeIn",e.h7="FadeOut"},9144:(t,e,i)=>{var s,r=void 0!==i.g?i.g:"undefined"!=typeof window?window:{},n=i(5893);"undefined"!=typeof document?s=document:(s=r["__GLOBAL_DOCUMENT_CACHE@4"])||(s=r["__GLOBAL_DOCUMENT_CACHE@4"]=n),t.exports=s},8070:(t,e,i)=>{"use strict";var s="undefined"!=typeof window?window:void 0!==i.g?i.g:{};t.exports=function(t,e){return t in s?s[t]:(s[t]=e,e)}},4167:(t,e,i)=>{"use strict";var s=i(8070);t.exports=function(t,e,i){var r="__INDIVIDUAL_ONE_VERSION_"+t,n=s(r+"_ENFORCE_SINGLETON",e);if(n!==e)throw Error("Can only have one copy of "+t+".\nYou already have version "+n+" installed.\nThis means you cannot install version "+e);return s(r,i)}},849:(t,e,i)=>{var s=!!(i.g===i.g.window&&i.g.URL&&i.g.Blob&&i.g.Worker);function r(t,e){var r,n=this;if(e=e||{},s)return r=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new i.g.Worker(i.g.URL.createObjectURL(new i.g.Blob([r],{type:"text/javascript"})));this.self=e,this.self.postMessage=function(t){setTimeout(function(){n.onmessage({data:t})},0)},setTimeout(t.bind(e,e),0)}r.prototype.postMessage=function(t){var e=this;setTimeout(function(){e.self.onmessage({data:t})},0)},t.exports=r},6240:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&null!==t}},1730:t=>{var e,i,s,r,n,a=/^(?:0|[1-9]\d*)$/,o=Object.prototype,l=o.hasOwnProperty,h=o.toString,u=o.propertyIsEnumerable,c=(e=Object.keys,i=Object,function(t){return e(i(t))}),d=Math.max,p=!u.call({valueOf:1},"valueOf");function f(t,e,i){var s=t[e];l.call(t,e)&&g(s,i)&&(void 0!==i||e in t)||(t[e]=i)}function m(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||a.test(t))&&t>-1&&t%1==0&&t<e}function v(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||o)}function g(t,e){return t===e||t!=t&&e!=e}var y=Array.isArray;function b(t){var e,i;return null!=t&&"number"==typeof(e=t.length)&&e>-1&&e%1==0&&e<=9007199254740991&&!("[object Function]"==(i=k(t)?h.call(t):"")||"[object GeneratorFunction]"==i)}function k(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var w=(s=function(t,e){if(p||v(e)||b(e)){!function(t,e,i,s){i||(i={});for(var r=-1,n=e.length;++r<n;){var a=e[r],o=s?s(i[a],t[a],a,i,t):void 0;f(i,a,void 0===o?t[a]:o)}}(e,b(e)?function(t,e){var i=y(t)||t&&"object"==typeof t&&b(t)&&l.call(t,"callee")&&(!u.call(t,"callee")||"[object Arguments]"==h.call(t))?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],s=i.length,r=!!s;for(var n in t)l.call(t,n)&&!(r&&("length"==n||m(n,s)))&&i.push(n);return i}(e):function(t){if(!v(t))return c(t);var e=[];for(var i in Object(t))l.call(t,i)&&"constructor"!=i&&e.push(i);return e}(e),t);return}for(var i in e)l.call(e,i)&&f(t,i,e[i])},r=function(t,e){var i=-1,r=e.length,n=r>1?e[r-1]:void 0,a=r>2?e[2]:void 0;for(n=s.length>3&&"function"==typeof n?(r--,n):void 0,a&&function(t,e,i){if(!k(i))return!1;var s=typeof e;return("number"==s?!!(b(i)&&m(e,i.length)):"string"==s&&(e in i))&&g(i[e],t)}(e[0],e[1],a)&&(n=r<3?void 0:n,r=1),t=Object(t);++i<r;){var o=e[i];o&&s(t,o,i,n)}return t},n=d(void 0===n?r.length-1:n,0),function(){for(var t=arguments,e=-1,i=d(t.length-n,0),s=Array(i);++e<i;)s[e]=t[n+e];e=-1;for(var a=Array(n+1);++e<n;)a[e]=t[e];return a[n]=s,function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(r,this,a)});t.exports=w},2098:(t,e,i)=>{t=i.nmd(t);var s,r,n,a,o,l,h,u="__lodash_hash_undefined__",c="[object Arguments]",d="[object Function]",p="[object Object]",f=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[c]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v[d]=v["[object Map]"]=v["[object Number]"]=v[p]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1;var g="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,y="object"==typeof self&&self&&self.Object===Object&&self,b=g||y||Function("return this")(),k=e&&!e.nodeType&&e,w=k&&t&&!t.nodeType&&t,x=w&&w.exports===k,P=x&&g.process,T=function(){try{var t=w&&w.require&&w.require("util").types;if(t)return t;return P&&P.binding&&P.binding("util")}catch(t){}}(),S=T&&T.isTypedArray;function O(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var _=Array.prototype,E=Function.prototype,R=Object.prototype,C=b["__core-js_shared__"],A=E.toString,j=R.hasOwnProperty,F=(a=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",G=R.toString,M=A.call(Object),I=RegExp("^"+A.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=x?b.Buffer:void 0,D=b.Symbol,$=b.Uint8Array,z=L?L.allocUnsafe:void 0,N=(o=Object.getPrototypeOf,l=Object,function(t){return o(l(t))}),V=Object.create,U=R.propertyIsEnumerable,W=_.splice,q=D?D.toStringTag:void 0,B=function(){try{var t=tp(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),H=L?L.isBuffer:void 0,X=Math.max,Y=Date.now,Z=tp(b,"Map"),J=tp(Object,"create"),K=function(){function t(){}return function(e){if(!tS(e))return{};if(V)return V(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Q(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function tt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function te(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function ti(t){var e=this.__data__=new tt(t);this.size=e.size}function ts(t,e,i){(void 0===i||ty(t[e],i))&&(void 0!==i||e in t)||tn(t,e,i)}function tr(t,e){for(var i=t.length;i--;)if(ty(t[i][0],e))return i;return -1}function tn(t,e,i){"__proto__"==e&&B?B(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}Q.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},Q.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Q.prototype.get=function(t){var e=this.__data__;if(J){var i=e[t];return i===u?void 0:i}return j.call(e,t)?e[t]:void 0},Q.prototype.has=function(t){var e=this.__data__;return J?void 0!==e[t]:j.call(e,t)},Q.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=J&&void 0===e?u:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,i=tr(e,t);return!(i<0)&&(i==e.length-1?e.pop():W.call(e,i,1),--this.size,!0)},tt.prototype.get=function(t){var e=this.__data__,i=tr(e,t);return i<0?void 0:e[i][1]},tt.prototype.has=function(t){return tr(this.__data__,t)>-1},tt.prototype.set=function(t,e){var i=this.__data__,s=tr(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(Z||tt),string:new Q}},te.prototype.delete=function(t){var e=td(this,t).delete(t);return this.size-=e?1:0,e},te.prototype.get=function(t){return td(this,t).get(t)},te.prototype.has=function(t){return td(this,t).has(t)},te.prototype.set=function(t,e){var i=td(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this},ti.prototype.clear=function(){this.__data__=new tt,this.size=0},ti.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},ti.prototype.get=function(t){return this.__data__.get(t)},ti.prototype.has=function(t){return this.__data__.has(t)},ti.prototype.set=function(t,e){var i=this.__data__;if(i instanceof tt){var s=i.__data__;if(!Z||s.length<199)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new te(s)}return i.set(t,e),this.size=i.size,this};var ta=function(t,e,i){for(var s=-1,r=Object(t),n=i(t),a=n.length;a--;){var o=n[++s];if(!1===e(r[o],o,r))break}return t};function to(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":q&&q in Object(t)?function(t){var e=j.call(t,q),i=t[q];try{t[q]=void 0;var s=!0}catch(t){}var r=G.call(t);return s&&(e?t[q]=i:delete t[q]),r}(t):G.call(t)}function tl(t){return tO(t)&&to(t)==c}function th(t,e,i,s,r){t!==e&&ta(e,function(n,a){if(r||(r=new ti),tS(n))!function(t,e,i,s,r,n,a){var o=tv(t,i),l=tv(e,i),h=a.get(l);if(h){ts(t,i,h);return}var u=n?n(o,l,i+"",t,e,a):void 0,c=void 0===u;if(c){var d,f,m=tk(l),v=!m&&tx(l),g=!m&&!v&&t_(l);u=l,m||v||g?tk(o)?u=o:tO(o)&&tw(o)?u=function(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e}(o):v?(c=!1,u=function(t,e){if(e)return t.slice();var i=t.length,s=z?z(i):new t.constructor(i);return t.copy(s),s}(l,!0)):g?(c=!1,new $(f=new(d=l.buffer).constructor(d.byteLength)).set(new $(d)),u=new l.constructor(f,l.byteOffset,l.length)):u=[]:function(t){if(!tO(t)||to(t)!=p)return!1;var e=N(t);if(null===e)return!0;var i=j.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&A.call(i)==M}(l)||tb(l)?(u=o,tb(o)?u=function(t,e,i,s){var r=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],l=s?s(i[o],t[o],o,i,t):void 0;void 0===l&&(l=t[o]),r?tn(i,o,l):function(t,e,i){var s=t[e];j.call(t,e)&&ty(s,i)&&(void 0!==i||e in t)||tn(t,e,i)}(i,o,l)}return i}(o,tR(o)):(!tS(o)||tP(o))&&(u="function"!=typeof l.constructor||tm(l)?{}:K(N(l)))):c=!1}c&&(a.set(l,u),r(u,l,s,n,a),a.delete(l)),ts(t,i,u)}(t,e,a,i,th,s,r);else{var o=s?s(tv(t,a),n,a+"",t,e,r):void 0;void 0===o&&(o=n),ts(t,a,o)}},tR)}function tu(t,e){var i;return tg((i=X(void 0===(i=e)?t.length-1:i,0),function(){for(var e=arguments,s=-1,r=X(e.length-i,0),n=Array(r);++s<r;)n[s]=e[i+s];s=-1;for(var a=Array(i+1);++s<i;)a[s]=e[s];return a[i]=tA(n),O(t,this,a)}),t+"")}function tc(t,e,i,s,r,n){return tS(t)&&tS(e)&&(n.set(e,t),th(t,e,void 0,tc,n),n.delete(e)),t}function td(t,e){var i,s=t.__data__;return("string"==(i=typeof e)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==e:null===e)?s["string"==typeof e?"string":"hash"]:s.map}function tp(t,e){var i=null==t?void 0:t[e];return!(!tS(i)||F&&F in i)&&(tP(i)?I:f).test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(i))?i:void 0}function tf(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&m.test(t))&&t>-1&&t%1==0&&t<e}function tm(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||R)}function tv(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var tg=(s=B?function(t,e){return B(t,"toString",{configurable:!0,enumerable:!1,value:function(){return e},writable:!0})}:tA,r=0,n=0,function(){var t=Y(),e=16-(t-n);if(n=t,e>0){if(++r>=800)return arguments[0]}else r=0;return s.apply(void 0,arguments)});function ty(t,e){return t===e||t!=t&&e!=e}var tb=tl(function(){return arguments}())?tl:function(t){return tO(t)&&j.call(t,"callee")&&!U.call(t,"callee")},tk=Array.isArray;function tw(t){return null!=t&&tT(t.length)&&!tP(t)}var tx=H||function(){return!1};function tP(t){if(!tS(t))return!1;var e=to(t);return e==d||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function tT(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function tS(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function tO(t){return null!=t&&"object"==typeof t}var t_=S?function(t){return S(t)}:function(t){return tO(t)&&tT(t.length)&&!!v[to(t)]},tE=tu(function(t){return t.push(void 0,tc),O(tC,void 0,t)});function tR(t){return tw(t)?function(t,e){var i=tk(t),s=!i&&tb(t),r=!i&&!s&&tx(t),n=!i&&!s&&!r&&t_(t),a=i||s||r||n,o=a?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],l=o.length;for(var h in t)(e||j.call(t,h))&&!(a&&("length"==h||r&&("offset"==h||"parent"==h)||n&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||tf(h,l)))&&o.push(h);return o}(t,!0):function(t){if(!tS(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=tm(t),i=[];for(var s in t)"constructor"==s&&(e||!j.call(t,s))||i.push(s);return i}(t)}var tC=(h=function(t,e,i,s){th(t,e,i,s)},tu(function(t,e){var i=-1,s=e.length,r=s>1?e[s-1]:void 0,n=s>2?e[2]:void 0;for(r=h.length>3&&"function"==typeof r?(s--,r):void 0,n&&function(t,e,i){if(!tS(i))return!1;var s=typeof e;return("number"==s?!!(tw(i)&&tf(e,i.length)):"string"==s&&(e in i))&&ty(i[e],t)}(e[0],e[1],n)&&(r=s<3?void 0:r,s=1),t=Object(t);++i<s;){var a=e[i];a&&h(t,a,i,r)}return t}));function tA(t){return t}t.exports=tE},3520:t=>{var e,i,s=/^(?:0|[1-9]\d*)$/,r=Object.prototype,n=r.hasOwnProperty,a=r.toString,o=r.propertyIsEnumerable,l=(e=Object.keys,i=Object,function(t){return e(i(t))}),h=function(t,e,i){for(var s=-1,r=Object(t),n=i(t),a=n.length;a--;){var o=n[++s];if(!1===e(r[o],o,r))break}return t},u=Array.isArray;function c(t){var e,i,s;return null!=t&&"number"==typeof(e=t.length)&&e>-1&&e%1==0&&e<=9007199254740991&&!("[object Function]"==(i=typeof t,s=t&&("object"==i||"function"==i)?a.call(t):"")||"[object GeneratorFunction]"==s)}function d(t){return c(t)?function(t,e){var i,r=u(t)||t&&"object"==typeof t&&c(t)&&n.call(t,"callee")&&(!o.call(t,"callee")||"[object Arguments]"==a.call(t))?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],l=r.length,h=!!l;for(var d in t)n.call(t,d)&&!(h&&("length"==d||(i=null==(i=l)?9007199254740991:i)&&("number"==typeof d||s.test(d))&&d>-1&&d%1==0&&d<i))&&r.push(d);return r}(t):function(t){if(e=t&&t.constructor,t!==("function"==typeof e&&e.prototype||r))return l(t);var e,i=[];for(var s in Object(t))n.call(t,s)&&"constructor"!=s&&i.push(s);return i}(t)}function p(t){return t}t.exports=function(t,e){return t&&t&&h(t,"function"==typeof e?e:p,d)}},372:(t,e,i)=>{"use strict";var s=i(6060);t.exports=function(t){if("function"!=typeof t||!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length||"function"!=typeof t.call||"function"!=typeof t.apply)return!1}catch(t){return!1}return!s(t)}},3940:(t,e,i)=>{"use strict";var s=i(5618),r={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!s(t)&&hasOwnProperty.call(r,typeof t)}},7205:(t,e,i)=>{"use strict";var s=i(372),r=/^\s*class[\s{/}]/,n=Function.prototype.toString;t.exports=function(t){return!(!s(t)||r.test(n.call(t)))}},6060:(t,e,i)=>{"use strict";var s=i(3940);t.exports=function(t){if(!s(t))return!1;try{if(!t.constructor)return!1;return t.constructor.prototype===t}catch(t){return!1}}},5618:t=>{"use strict";var e=void 0;t.exports=function(t){return t!==e&&null!==t}},4935:(t,e,i)=>{var s=i(3513);t.exports=s},7921:(t,e,i)=>{var s=i(3072);t.exports=s},347:(t,e,i)=>{var s=i(8744);t.exports=s},9720:(t,e,i)=>{var s=i(6943);t.exports=s},6672:(t,e,i)=>{var s=i(6240),r=i(7265);function n(t,e,i,s){if(s){var n=s[e];if(r(n))n.unhook&&n.unhook(t,e,i);else if("attributes"===e)for(var a in n)t.removeAttribute(a);else if("style"===e)for(var o in n)t.style[o]="";else"string"==typeof n?t[e]="":t[e]=null}}function a(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=function(t,e,i){for(var o in e){var l=e[o];void 0===l?n(t,o,l,i):r(l)?(n(t,o,l,i),l.hook&&l.hook(t,o,i?i[o]:void 0)):s(l)?function(t,e,i,r,n){var o=i?i[r]:void 0;if("attributes"===r){for(var l in n){var h=n[l];void 0===h?t.removeAttribute(l):t.setAttribute(l,h)}return}if(o&&s(o)&&a(o)!==a(n)){t[r]=n;return}s(t[r])||(t[r]={});var u="style"===r?"":void 0;for(var c in n){var d=n[c];t[r][c]=void 0===d?u:d}}(t,0,i,o,l):t[o]=l}}},3513:(t,e,i)=>{var s=i(9144),r=i(6672),n=i(5170),a=i(6221),o=i(4097),l=i(6078);t.exports=function t(e,i){var h=i&&i.document||s,u=i?i.warn:null;if(o(e=l(e).a))return e.init();if(a(e))return h.createTextNode(e.text);if(!n(e))return u&&u("Item is not a valid virtual dom node",e),null;var c=null===e.namespace?h.createElement(e.tagName):h.createElementNS(e.namespace,e.tagName);r(c,e.properties);for(var d=e.children,p=0;p<d.length;p++){var f=t(d[p],i);f&&c.appendChild(f)}return c}},8992:t=>{var e={};function i(t,e,i){if(0===t.length)return!1;for(var s,r,n=0,a=t.length-1;n<=a;){if(r=t[s=(a+n)/2>>0],n===a)return r>=e&&r<=i;if(r<e)n=s+1;else{if(!(r>i))return!0;a=s-1}}return!1}function s(t,e){return t>e?1:-1}t.exports=function(t,r,n,a){return n&&0!==n.length?(n.sort(s),function t(s,r,n,a,o){if(a=a||{},s){i(n,o,o)&&(a[o]=s);var l=r.children;if(l)for(var h=s.childNodes,u=0;u<r.children.length;u++){o+=1;var c=l[u]||e,d=o+(c.count||0);i(n,o,d)&&t(h[u],c,n,a,o),o=d}}return a}(t,r,n,a,0)):{}}},9120:(t,e,i)=>{var s=i(6672),r=i(4097),n=i(8057),a=i(6670);function o(t,e){"function"==typeof e.destroy&&r(e)&&e.destroy(t)}t.exports=function(t,e,i){var r,l,h,u,c,d,p,f,m=t.type,v=t.vNode,g=t.patch;switch(m){case n.REMOVE:return(r=e.parentNode)&&r.removeChild(e),o(e,v),null;case n.INSERT:return l=i.render(g,i),e&&e.appendChild(l),e;case n.VTEXT:return function(t,e,i,s){var r;if(3===t.nodeType)t.replaceData(0,t.length,i.text),r=t;else{var n=t.parentNode;r=s.render(i,s),n&&r!==t&&n.replaceChild(r,t)}return r}(e,0,g,i);case n.WIDGET:return h=(u=a(v,g))?g.update(v,e)||e:i.render(g,i),(c=e.parentNode)&&h!==e&&c.replaceChild(h,e),u||o(e,v),h;case n.VNODE:return d=e.parentNode,p=i.render(g,i),d&&p!==e&&d.replaceChild(p,e),p;case n.ORDER:return function(t,e){for(var i,s,r,n=t.childNodes,a={},o=0;o<e.removes.length;o++)i=n[(s=e.removes[o]).from],s.key&&(a[s.key]=i),t.removeChild(i);for(var l=n.length,h=0;h<e.inserts.length;h++)i=a[(r=e.inserts[h]).key],t.insertBefore(i,r.to>=l++?null:n[r.to])}(e,g),e;case n.PROPS:return s(e,g,v.properties),e;case n.THUNK:return f=i.patch(e,g,i),e&&f&&e!==f&&e.parentNode&&e.parentNode.replaceChild(f,e),f;default:return e}}},6943:(t,e,i)=>{var s=i(9144),r=i(7362),n=i(3513),a=i(8992),o=i(9120);function l(t,e,i){var n=function(t){var e=[];for(var i in t)"a"!==i&&e.push(Number(i));return e}(e);if(0===n.length)return t;var l=a(t,e.a,n),h=t.ownerDocument;i.document||h===s||(i.document=h);for(var u=0;u<n.length;u++){var c=n[u];t=function(t,e,i,s){if(!e)return t;if(r(i))for(var n,a=0;a<i.length;a++)n=o(i[a],e,s),e===t&&(t=n);else n=o(i,e,s),e===t&&(t=n);return t}(t,l[c],e[c],i)}return t}t.exports=function t(e,i,s){return(s=s||{}).patch=s.patch&&s.patch!==t?s.patch:l,s.render=s.render||n,s.patch(e,i,s)}},6670:(t,e,i)=>{var s=i(4097);t.exports=function(t,e){return!!(s(t)&&s(e))&&("name"in t&&"name"in e?t.id===e.id:t.init===e.init)}},6505:(t,e,i)=>{"use strict";var s=i(8832);function r(t){if(!(this instanceof r))return new r(t);this.value=t}t.exports=r,r.prototype.hook=function(t,e){s(t)[e.substr(3)]=this.value},r.prototype.unhook=function(t,e){s(t)[e.substr(3)]=void 0}},7199:t=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this.value=t}t.exports=e,e.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},8744:(t,e,i)=>{"use strict";var s=i(7362),r=i(4282),n=i(4268),a=i(5170),o=i(6221),l=i(4097),h=i(7265),u=i(6741),c=i(1948),d=i(7199),p=i(6505);function f(t){return a(t)||o(t)||l(t)||u(t)}function m(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}t.exports=function(t,e,i){var a,o,l,u,v=[];return!i&&("string"==typeof e||s(e)||f(e))&&(i=e,o={}),a=c(t,o=o||e||{}),o.hasOwnProperty("key")&&(l=o.key,o.key=void 0),o.hasOwnProperty("namespace")&&(u=o.namespace,o.namespace=void 0),"INPUT"===a&&!u&&o.hasOwnProperty("value")&&void 0!==o.value&&!h(o.value)&&(o.value=d(o.value)),function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];if(h(i))continue;"ev-"===e.substr(0,3)&&(t[e]=p(i))}}(o),null!=i&&function t(e,i,r,a){if("string"==typeof e)i.push(new n(e));else if("number"==typeof e)i.push(new n(String(e)));else if(f(e))i.push(e);else if(s(e))for(var o,l,h=0;h<e.length;h++)t(e[h],i,r,a);else{if(null==e)return;throw o={foreignObject:e,parentVnode:{tagName:r,properties:a}},(l=Error()).type="virtual-hyperscript.unexpected.virtual-element",l.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+m(o.foreignObject)+".\nThe parent vnode is:\n"+m(o.parentVnode),l.foreignObject=o.foreignObject,l.parentVnode=o.parentVnode,l}}(i,v,a,o),new r(a,o,v,l,u)}},1948:(t,e,i)=>{"use strict";var s=i(6824),r=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,n=/^\.|#/;t.exports=function(t,e){if(!t)return"DIV";var i,a,o,l,h=!e.hasOwnProperty("id"),u=s(t,r),c=null;for(n.test(u[1])&&(c="DIV"),l=0;l<u.length;l++)(a=u[l])&&(o=a.charAt(0),c?"."===o?(i=i||[]).push(a.substring(1,a.length)):"#"===o&&h&&(e.id=a.substring(1,a.length)):c=a);return i&&(e.className&&i.push(e.className),e.className=i.join(" ")),e.namespace?c:c.toUpperCase()}},6078:(t,e,i)=>{var s=i(5170),r=i(6221),n=i(4097),a=i(6741);function o(t,e){var i=t.vnode;if(i||(i=t.vnode=t.render(e)),!(s(i)||r(i)||n(i)))throw Error("thunk did not return a valid node");return i}t.exports=function(t,e){var i=t,s=e;return a(e)&&(s=o(e,t)),a(t)&&(i=o(t,null)),{a:i,b:s}}},6741:t=>{t.exports=function(t){return t&&"Thunk"===t.type}},7265:t=>{t.exports=function(t){return t&&("function"==typeof t.hook&&!t.hasOwnProperty("hook")||"function"==typeof t.unhook&&!t.hasOwnProperty("unhook"))}},5170:(t,e,i)=>{var s=i(9962);t.exports=function(t){return t&&"VirtualNode"===t.type&&t.version===s}},6221:(t,e,i)=>{var s=i(9962);t.exports=function(t){return t&&"VirtualText"===t.type&&t.version===s}},4097:t=>{t.exports=function(t){return t&&"Widget"===t.type}},9962:t=>{t.exports="2"},4282:(t,e,i)=>{var s=i(9962),r=i(5170),n=i(4097),a=i(6741),o=i(7265);t.exports=u;var l={},h=[];function u(t,e,i,s,u){this.tagName=t,this.properties=e||l,this.children=i||h,this.key=null!=s?String(s):void 0,this.namespace="string"==typeof u?u:null;var c,d=i&&i.length||0,p=0,f=!1,m=!1,v=!1;for(var g in e)if(e.hasOwnProperty(g)){var y=e[g];o(y)&&y.unhook&&(c||(c={}),c[g]=y)}for(var b=0;b<d;b++){var k=i[b];r(k)?(p+=k.count||0,!f&&k.hasWidgets&&(f=!0),!m&&k.hasThunks&&(m=!0),!v&&(k.hooks||k.descendantHooks)&&(v=!0)):!f&&n(k)?"function"==typeof k.destroy&&(f=!0):!m&&a(k)&&(m=!0)}this.count=d+p,this.hasWidgets=f,this.hasThunks=m,this.hooks=c,this.descendantHooks=v}u.prototype.version=s,u.prototype.type="VirtualNode"},8057:(t,e,i)=>{var s=i(9962);function r(t,e,i){this.type=Number(t),this.vNode=e,this.patch=i}r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,t.exports=r,r.prototype.version=s,r.prototype.type="VirtualPatch"},4268:(t,e,i)=>{var s=i(9962);function r(t){this.text=String(t)}t.exports=r,r.prototype.version=s,r.prototype.type="VirtualText"},9973:(t,e,i)=>{var s=i(6240),r=i(7265);function n(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=function t(e,i){var a;for(var o in e){o in i||((a=a||{})[o]=void 0);var l=e[o],h=i[o];if(l!==h){if(s(l)&&s(h)){if(n(h)!==n(l))(a=a||{})[o]=h;else if(r(h))(a=a||{})[o]=h;else{var u=t(l,h);u&&((a=a||{})[o]=u)}}else(a=a||{})[o]=h}}for(var c in i)c in e||((a=a||{})[c]=i[c]);return a}},3072:(t,e,i)=>{var s=i(7362),r=i(8057),n=i(5170),a=i(6221),o=i(4097),l=i(6741),h=i(6078),u=i(9973);function c(t,e){var i={a:t};return function t(e,i,s,h){if(e!==i){var c=s[h],g=!1;if(l(e)||l(i))p(e,i,s,h);else if(null==i)o(e)||(d(e,s,h),c=s[h]),c=v(c,new r(r.REMOVE,e,i));else if(n(i)){if(n(e)){if(e.tagName===i.tagName&&e.namespace===i.namespace&&e.key===i.key){var y=u(e.properties,i.properties);y&&(c=v(c,new r(r.PROPS,e,y))),c=function(e,i,s,a,o){for(var l=e.children,h=function(t,e){var i,s=m(e),r=s.keys,n=s.free;if(n.length===e.length)return{children:e,moves:null};var a=m(t),o=a.keys;if(a.free.length===t.length)return{children:e,moves:null};for(var l=[],h=0,u=n.length,c=0,d=0;d<t.length;d++){var p,v=t[d];v.key?r.hasOwnProperty(v.key)?(p=r[v.key],l.push(e[p])):(p=d-c++,l.push(null)):h<u?(p=n[h++],l.push(e[p])):(p=d-c++,l.push(null))}for(var g=h>=n.length?e.length:n[h],y=0;y<e.length;y++){var b=e[y];b.key?o.hasOwnProperty(b.key)||l.push(b):y>=g&&l.push(b)}for(var k=l.slice(),w=0,x=[],P=[],T=0;T<e.length;){var S=e[T];for(i=k[w];null===i&&k.length;)x.push(f(k,w,null)),i=k[w];i&&i.key===S.key?(w++,T++):S.key?(i&&i.key&&r[i.key]!==T+1?(x.push(f(k,w,i.key)),(i=k[w])&&i.key===S.key?w++:P.push({key:S.key,to:T})):P.push({key:S.key,to:T}),T++):i&&i.key&&x.push(f(k,w,i.key))}for(;w<k.length;)i=k[w],x.push(f(k,w,i&&i.key));return x.length!==c||P.length?{children:l,moves:{removes:x,inserts:P}}:{children:l,moves:null}}(l,i.children),u=h.children,c=l.length,d=u.length,p=c>d?c:d,g=0;g<p;g++){var y=l[g],b=u[g];o+=1,y?t(y,b,s,o):b&&(a=v(a,new r(r.INSERT,null,b))),n(y)&&y.count&&(o+=y.count)}return h.moves&&(a=v(a,new r(r.ORDER,e,h.moves))),a}(e,i,s,c,h)}else c=v(c,new r(r.VNODE,e,i)),g=!0}else c=v(c,new r(r.VNODE,e,i)),g=!0}else a(i)?a(e)?e.text!==i.text&&(c=v(c,new r(r.VTEXT,e,i))):(c=v(c,new r(r.VTEXT,e,i)),g=!0):o(i)&&(o(e)||(g=!0),c=v(c,new r(r.WIDGET,e,i)));c&&(s[h]=c),g&&d(e,s,h)}}(t,e,i,0),i}function d(t,e,i){(function t(e,i,s){if(n(e)){if(e.hooks&&(i[s]=v(i[s],new r(r.PROPS,e,function(t){var e={};for(var i in t)e[i]=void 0;return e}(e.hooks)))),e.descendantHooks||e.hasThunks)for(var a=e.children,o=a.length,h=0;h<o;h++){var u=a[h];t(u,i,s+=1),n(u)&&u.count&&(s+=u.count)}}else l(e)&&p(e,null,i,s)})(t,e,i),function t(e,i,s){if(o(e))"function"==typeof e.destroy&&(i[s]=v(i[s],new r(r.REMOVE,e,null)));else if(n(e)&&(e.hasWidgets||e.hasThunks))for(var a=e.children,h=a.length,u=0;u<h;u++){var c=a[u];t(c,i,s+=1),n(c)&&c.count&&(s+=c.count)}else l(e)&&p(e,null,i,s)}(t,e,i)}function p(t,e,i,s){var n=h(t,e),a=c(n.a,n.b);(function(t){for(var e in t)if("a"!==e)return!0;return!1})(a)&&(i[s]=new r(r.THUNK,null,a))}function f(t,e,i){return t.splice(e,1),{from:e,key:i}}function m(t){for(var e={},i=[],s=t.length,r=0;r<s;r++){var n=t[r];n.key?e[n.key]=r:i.push(r)}return{keys:e,free:i}}function v(t,e){return t?(s(t)?t.push(e):t=[t,e],t):e}t.exports=c},4991:t=>{"use strict";function e(t,e){var i=Math.pow(2,e-1);return Math.max(-i,Math.min(i-1,t<0?t*i:t*(i-1)))}function i(t,i,r){var n,a,o,l,h,u,c=t.length,d=Math.ceil(c/i),p=s(r,2*d);for(n=0;n<d;n++)a=n*i,o=(n+1)*i>c?c:(n+1)*i,h=e((u=function(t){for(var e,i=1/0,s=-1/0,r=0,n=t.length;r<n;r++)i>(e=t[r])&&(i=e),s<e&&(s=e);return{min:i,max:s}}(t.subarray(a,o))).min,r),l=e(u.max,r),p[2*n]=h,p[2*n+1]=l;return p}function s(t,e){return new(Function(`return Int${t}Array`)())(e)}function r(t,e){return"number"==typeof t?t:e}t.exports=function(t,e,n,a,o,l){if(e=r(e,1e3),l=r(l,16),null==n&&(n=!0),0>[8,16,32].indexOf(l))throw Error("Invalid number of bits specified for peaks.");var h,u,c=t.numberOfChannels,d=[];if(a=r(a,0),o=r(o,t.length),void 0===t.subarray)for(h=0;h<c;h++)u=t.getChannelData(h).subarray(a,o),d.push(i(u,e,l));else d.push(i(t.subarray(a,o),e,l));return n&&d.length>1&&(d=function(t,e){var i,r,n=t.length,a=1/n,o=t[0].length/2,l=0,h=0,u=s(e,2*o);for(h=0;h<o;h++){for(l=0,i=0,r=0;l<n;l++)i+=a*t[l][2*h],r+=a*t[l][2*h+1];u[2*h]=i,u[2*h+1]=r}return[u]}(d,l)),{length:d[0].length/2,data:d,bits:l}}},7362:t=>{var e=Array.isArray,i=Object.prototype.toString;t.exports=e||function(t){return"[object Array]"===i.call(t)}},5893:()=>{}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s](n,n.exports,i),n.loaded=!0,n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var s={};return(()=>{"use strict";i.r(s),i.d(s,{default:()=>tr,init:()=>ts});var t,e=i(2098),r=i.n(e),n=i(4935),a=i.n(n),o=i(8370),l=i.n(o),h=i(347),u=i.n(h),c=i(7921),d=i.n(c),p=i(9720),f=i.n(p),m=i(849),v=i.n(m);function g(t,e){return Math.ceil(t*e)}function y(t,e,i){return Math.ceil(t*i/e)}let b=class{constructor(t,e,i=l()()){this.src=t,this.ac=e,this.audioRequestState=0,this.ee=i}setStateChange(t){this.audioRequestState=t,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}fileProgress(t){let e=0;0===this.audioRequestState&&this.setStateChange(1),t.lengthComputable&&(e=t.loaded/t.total*100),this.ee.emit("loadprogress",e,this.src)}fileLoad(t){let e=t.target.response||t.target.result;return this.setStateChange(2),new Promise((t,i)=>{this.ac.decodeAudioData(e,e=>{this.audioBuffer=e,this.setStateChange(3),this.ee.emit("tracksUpdated",!1),t(e)},t=>{null===t?i(Error("MediaDecodeAudioDataUnknownContentType")):i(t)})})}},k=class extends b{load(){return new Promise((t,e)=>{if(this.src.type.match(/audio.*/)||this.src.type.match(/video\/ogg/)){let i=new FileReader;i.readAsArrayBuffer(this.src),i.addEventListener("progress",t=>{super.fileProgress(t)}),i.addEventListener("load",i=>{super.fileLoad(i).then(e=>{t(e)}).catch(e)}),i.addEventListener("error",e)}else e(Error(`Unsupported file type ${this.src.type}`))})}};class w extends b{load(){return Promise.resolve(this.src)}}let x=class extends b{load(){return new Promise((t,e)=>{let i=new XMLHttpRequest;i.open("GET",this.src,!0),i.responseType="arraybuffer",i.send(),i.addEventListener("progress",t=>{super.fileProgress(t)}),i.addEventListener("load",i=>{super.fileLoad(i).then(e=>{t(e)}).catch(e)}),i.addEventListener("error",()=>{e(Error(`Track ${this.src} failed to load`))})})}},P=class{static createLoader(t,e,i){if(t instanceof Blob)return new k(t,e,i);if(t instanceof AudioBuffer)return new w(t,e,i);if("string"==typeof t)return new x(t,e,i);throw Error("Unsupported src type")}},T=class{constructor(t){this.playlist=t}hook(t){let e=this.playlist;if(!e.isScrolling){if(e.isAutomaticScroll){let i=t.getBoundingClientRect(),s=e.controls.show?e.controls.width:0,r=(i.width-s)*e.samplesPerPixel/e.sampleRate,n=e.isPlaying()?e.playbackSeconds:e.getTimeSelection().start;(n<e.scrollLeft||n>=e.scrollLeft+r)&&(e.scrollLeft=Math.min(n,e.duration-r))}let i=y(e.scrollLeft,e.samplesPerPixel,e.sampleRate);t.scrollLeft=i}}},S=class{constructor(t,e,i,s,r){this.tickInfo=t,this.offset=e,this.samplesPerPixel=i,this.duration=s,this.colors=r}hook(t,e,i){if(void 0!==i&&i.offset===this.offset&&i.duration===this.duration&&i.samplesPerPixel===this.samplesPerPixel)return;let s=t.width,r=t.height,n=t.getContext("2d");n.clearRect(0,0,s,r),n.fillStyle=this.colors.timeColor,Object.keys(this.tickInfo).forEach(t=>{let e=this.tickInfo[t];n.fillRect(t,r-e,1,e)})}};class O{constructor(t,e,i,s,r=0,n){this.duration=t,this.offset=e,this.samplesPerPixel=i,this.sampleRate=s,this.marginLeft=r,this.colors=n,this.timeinfo={2e4:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12e3:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},1e4:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5e3:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}getScaleInfo(t){let e=Object.keys(this.timeinfo).map(t=>parseInt(t,10));e=e.sort((t,e)=>t-e);for(let i=0;i<e.length;i+=1)if(t<=e[i])return this.timeinfo[e[i]];return this.timeinfo[e[0]]}static formatTime(t){let e=t/1e3,i=e%60,s=(e-i)/60;return i<10&&(i=`0${i}`),`${s}:${i}`}render(){let t=y(this.duration,this.samplesPerPixel,this.sampleRate),e=this.sampleRate/this.samplesPerPixel,i=y(this.offset,this.samplesPerPixel,this.sampleRate),s=this.getScaleInfo(this.samplesPerPixel),r={},n=[],a=t+i,o=0;for(let t=0;t<a;t+=e*s.secondStep){let e=Math.floor(t),a=e-i;e>=i&&(s.marker&&o%s.marker==0?(n.push(u()("div.time",{attributes:{style:`position: absolute; left: ${a}px;`}},[O.formatTime(o)])),r[a]=10):s.bigStep&&o%s.bigStep==0?r[a]=5:s.smallStep&&o%s.smallStep==0&&(r[a]=2)),o+=1e3*s.secondStep}return u()("div.playlist-time-scale",{attributes:{style:`position: relative; left: 0; right: 0; margin-left: ${this.marginLeft}px;`}},[n,u()("canvas",{attributes:{width:t,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new S(r,this.offset,this.samplesPerPixel,this.duration,this.colors)})])}}var _=i(1730),E=i.n(_),R=i(3520),C=i.n(R),A=new Uint8Array(16);let j=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var F=[],G=0;G<256;++G)F.push((G+256).toString(16).substr(1));let M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(F[t[e+0]]+F[t[e+1]]+F[t[e+2]]+F[t[e+3]]+"-"+F[t[e+4]]+F[t[e+5]]+"-"+F[t[e+6]]+F[t[e+7]]+"-"+F[t[e+8]]+F[t[e+9]]+"-"+F[t[e+10]]+F[t[e+11]]+F[t[e+12]]+F[t[e+13]]+F[t[e+14]]+F[t[e+15]]).toLowerCase();if(!("string"==typeof i&&j.test(i)))throw TypeError("Stringified UUID is invalid");return i},I=function(e,i,s){var r=(e=e||{}).random||(e.rng||function(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(A)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i){s=s||0;for(var n=0;n<16;++n)i[s+n]=r[n];return i}return M(r)};var L=i(4991),D=i.n(L),$=i(1114);let z=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){t.preventDefault();let e=t.offsetX*this.samplesPerPixel/this.sampleRate;this.track.ee.emit("select",e,e,this.track)}static getClass(){return".state-cursor"}static getEvents(){return["click"]}},N={cursor:z,select:class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitSelection(t){let e=Math.min(t,this.startX),i=Math.max(t,this.startX),s=e*this.samplesPerPixel/this.sampleRate,r=i*this.samplesPerPixel/this.sampleRate;this.track.ee.emit("select",s,r,this.track)}complete(t){this.emitSelection(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.startX=t.offsetX;let e=this.startX*this.samplesPerPixel/this.sampleRate;this.track.ee.emit("select",e,e,this.track)}mousemove(t){this.active&&(t.preventDefault(),this.emitSelection(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-select"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},shift:class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitShift(t){let e=(t-this.prevX)*this.samplesPerPixel/this.sampleRate;this.prevX=t,this.track.ee.emit("shift",e,this.track)}complete(t){this.emitShift(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.el=t.target,this.prevX=t.offsetX}mousemove(t){this.active&&(t.preventDefault(),this.emitShift(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-shift"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},fadein:class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){let e=t.offsetX*this.samplesPerPixel/this.sampleRate;e>this.track.getStartTime()&&e<this.track.getEndTime()&&this.track.ee.emit("fadein",e-this.track.getStartTime(),this.track)}static getClass(){return".state-fadein"}static getEvents(){return["click"]}},fadeout:class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){let e=t.offsetX*this.samplesPerPixel/this.sampleRate;e>this.track.getStartTime()&&e<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-e,this.track)}static getClass(){return".state-fadeout"}static getEvents(){return["click"]}}};class V{constructor(t,e,i,s,r,n,a,o,l){this.peaks=t,this.offset=e,this.color=s,this.bits=i,this.scale=r,this.height=n,this.barWidth=a,this.barGap=o,this.borderRadius=l}static drawFrame(t,e,i,s,r,n,a){let o=Math.abs(s*e);t.fillRect(i,0,n,e-Math.abs(r*e)),t.fillRect(i,e+o,n,e-o),0!==a&&t.fillRect(i+n,0,a,2*e)}hook(t,e,i){if(void 0!==i&&i.peaks===this.peaks&&i.scale===this.scale&&i.height===this.height)return;let s=this.scale,r=t.width/s,n=t.getContext("2d"),a=t.height/s/2,o=2**(this.bits-1),l=this.barWidth,h=this.barGap,u=l+h;this.borderRadius,n.clearRect(0,0,t.width,t.height),n.save(),n.fillStyle=this.color,n.scale(s,s);for(let t=0;t<r;t+=u){let e=this.peaks[(t+this.offset)*2]/o,i=this.peaks[(t+this.offset)*2+1]/o;V.drawFrame(n,a,t,e,i,l,h)}n.restore()}}var U=i(6226);class W{constructor(t,e,i,s){this.type=t,this.shape=e,this.duration=i,this.samplesPerPixel=s}static createCurve(t,e,i){let s,r;switch(e){case $.Y1:s=1;break;case $.h7:s=-1;break;default:throw Error("Unsupported fade type.")}switch(t){case $._h:r=(0,U.sCurve)(i,s);break;case $.t$:r=(0,U.linear)(i,s);break;case $.Jl:r=(0,U.exponential)(i,s);break;case $.Hp:r=(0,U.logarithmic)(i,10,s);break;default:throw Error("Unsupported fade shape")}return r}hook(t,e,i){if(void 0!==i&&i.shape===this.shape&&i.type===this.type&&i.duration===this.duration&&i.samplesPerPixel===this.samplesPerPixel)return;let s=t.getContext("2d"),r=t.width,n=t.height,a=W.createCurve(this.shape,this.type,r),o=a.length,l=n-a[0]*n;s.clearRect(0,0,t.width,t.height),s.save(),s.strokeStyle="black",s.beginPath(),s.moveTo(0,l);for(let t=1;t<o;t+=1)l=n-a[t]*n,s.lineTo(t,l);s.stroke(),s.restore()}}let q=class{constructor(t){this.gain=t}hook(t){t.value=100*this.gain,t.title=`${Math.round(100*this.gain)}% volume`}},B=class{constructor(t){this.stereoPan=t}hook(t){let e;t.value=100*this.stereoPan,e=0===this.stereoPan?"Center":this.stereoPan<0?"Left":"Right";let i=`${Math.abs(Math.round(100*this.stereoPan))}% `;t.title=`Pan: ${0!==this.stereoPan?i:""}${e}`}},H=class{constructor(){this.id="",this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0,this.stereoPan=0}setEventEmitter(t){this.ee=t}setId(t){this.id=t}setName(t){this.name=t}setCustomClass(t){this.customClass=t}setWaveOutlineColor(t){this.waveOutlineColor=t}setCues(t,e){if(e<t)throw Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}trim(t,e){let i=this.getStartTime(),s=this.getEndTime(),r=this.cueIn-i;if(i<=t&&s>=t||i<=e&&s>=e){let n=t<i?i:t;this.setCues(n+r,(e>s?s:e)+r),t>i&&this.setStartTime(t)}}createArrayBuffer(t,e,i){let s;let r=this.getStartTime(),n=this.getEndTime(),a=t-this.getStartTime();a<0&&(a=0);let o=a/this.duration,l=e-this.getStartTime(),h=(this.duration-l)/this.duration;if(h<0&&(h=0),t<=n&&e>=r){let t=this.buffer.numberOfChannels,e=o*this.buffer.length,r=h*this.buffer.length;try{s=i.createBuffer(t,e+r,this.buffer.sampleRate);let n=new Float32Array(e),a=new Float32Array(r);for(let i=0;i<t;i++)this.buffer.copyFromChannel(n,i,0),this.buffer.copyFromChannel(a,i,this.buffer.length-r),s.copyToChannel(n,i,0),s.copyToChannel(a,i,e)}catch(t){throw t}}return s}razorCut(t,e,i){let s=this.createArrayBuffer(t,i.endTime,e),r=this.createArrayBuffer(i.startTime,t,e);return this.ee.emit("razorCutFinished",{Track:i,Point:t,buffer1:s,buffer2:r})}removePart(t,e,i,s){let r,n;this.ee.emit("saveCutManipulation",this.buffer,s);let a=this.getStartTime(),o=this.getEndTime();t<=e?(r=t,n=e):(r=e,n=t);let l=r-this.getStartTime();l<0&&(l=0);let h=l/this.duration,u=n-this.getStartTime(),c=(this.duration-u)/this.duration;if(c<0&&(c=0),r<=o&&n>=a){let t;let e=this.buffer.numberOfChannels,r=h*this.buffer.length,n=c*this.buffer.length;try{t=i.createBuffer(e,r+n,this.buffer.sampleRate);let s=new Float32Array(r),a=new Float32Array(n);for(let i=0;i<e;i++)this.buffer.copyFromChannel(s,i,0),this.buffer.copyFromChannel(a,i,this.buffer.length-n),t.copyToChannel(s,i,0),t.copyToChannel(a,i,r)}catch(t){throw t}let a=s.fades;if(void 0!==a&&Object.keys(a).length>0){let e=0,i=0;Object.keys(a).forEach(t=>{"FadeIn"===a[t].type?e=a[t].end-a[t].start:"FadeOut"===a[t].type&&(i=a[t].end-a[t].start)}),e+i>=t.duration&&(this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0))}this.buffer=t,this.setCues(0,t.duration),this.playout.buffer=this.buffer}}setStartTime(t){this.startTime=t,this.endTime=t+this.duration}setPlayout(t){this.playout=t}setOfflinePlayout(t){this.offlinePlayout=t}setEnabledStates(t={}){this.enabledStates=E()({},{cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0},t)}setFadeIn(t,e="logarithmic"){if(t>this.duration)throw Error("Invalid Fade In");let i={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade($.Y1,i.shape,i.start,i.end)}setFadeOut(t,e="logarithmic"){if(t>this.duration)throw Error("Invalid Fade Out");let i={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade($.h7,i.shape,i.start,i.end)}saveFade(t,e,i,s){let r=I();return this.fades[r]={type:t,shape:e,start:i,end:s},r}removeFade(t){delete this.fades[t]}setBuffer(t){this.buffer=t}setPeakData(t){this.peakData=t}calculatePeaks(t,e){let i=g(this.cueIn,e),s=g(this.cueOut,e);this.setPeaks(D()(this.buffer,t,this.peakData.mono,i,s))}setPeaks(t){this.peaks=t}setState(t){if(this.state=t,this.state&&this.enabledStates[this.state]){let t=N[this.state];this.stateObj=new t(this)}else this.stateObj=void 0}getStartTime(){return this.startTime}getEndTime(){return this.endTime}getDuration(){return this.duration}isPlaying(){return this.playout.isPlaying()}setShouldPlay(t){this.playout.setShouldPlay(t)}setGainLevel(t){this.gain=t,this.playout.setVolumeGainLevel(t)}setMasterGainLevel(t){this.playout.setMasterGainLevel(t)}setStereoPanValue(t){this.stereoPan=t,this.playout.setStereoPanValue(t)}setEffects(t){this.effectsGraph=t,this.playout.setEffects(t)}schedulePlay(t,e,i,s){let r,n;let a=t,o=i?i-e:void 0,l=E()({},{shouldPlay:!0,masterGain:1,isOffline:!1},s),h=l.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=e||o&&e+o<this.startTime)return Promise.resolve();this.startTime>=e?(r=0,a+=this.startTime-e,i?(o-=this.startTime-e,n=Math.min(o,this.duration)):n=this.duration):(r=e-this.startTime,n=i?Math.min(o,this.duration-r):this.duration-r),r+=this.cueIn;let u=e-this.startTime,c=h.setUpSource();return C()(this.fades,e=>{let i,s;if(u<e.end)switch(u<=e.start?(i=t+(e.start-u),s=e.end-e.start):u>e.start&&u<e.end&&(i=t-(u-e.start),s=e.end-e.start),e.type){case $.Y1:h.applyFadeIn(i,s,e.shape);break;case $.h7:h.applyFadeOut(i,s,e.shape);break;default:throw Error("Invalid fade type saved on track.")}}),h.setVolumeGainLevel(this.gain),h.setShouldPlay(l.shouldPlay),h.setMasterGainLevel(l.masterGain),h.setStereoPanValue(this.stereoPan),h.play(a,r,n),c}scheduleStop(t=0){this.playout.stop(t)}renderOverlay(t){let e=y(t.playlistLength,t.resolution,t.sampleRate),i={attributes:{style:`position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: ${e}px; z-index: 9;`}},s="";if(this.stateObj){this.stateObj.setup(t.resolution,t.sampleRate);let e=N[this.state];e.getEvents().forEach(t=>{i[`on${t}`]=this.stateObj[t].bind(this.stateObj)}),s=e.getClass()}return u()(`div.playlist-overlay${s}`,i)}renderControls(t){let e=t.muted?".active":"",i=t.soloed?".active":"",s=t.collapsed,r=this.peaks.data.length,n=t.controls.widgets,a=u()("button.btn.btn-danger.btn-xs.track-remove",{attributes:{id:"remove",type:"button",title:"Remove track"},onclick:()=>{this.ee.emit("removeTrack",this)}},[u()("i.fas.fa-times")]),o=u()("button.btn.btn-info.btn-xs.track-collapse",{attributes:{id:"collapse",type:"button",title:s?"Expand track":"Collapse track"},onclick:()=>{this.ee.emit("changeTrackView",this,{collapsed:!s})}},[u()(`i.fas.${s?"fa-caret-down":"fa-caret-up"}`)]),l=[];n.remove&&l.push(a),n.collapse&&l.push(o);let h=[u()("div.track-header",l)];return!s&&(n.muteOrSolo&&h.push(u()("div.btn-group",[u()(`button.btn.btn-outline-dark.btn-xs.btn-mute${e}`,{attributes:{type:"button"},onclick:()=>{this.ee.emit("mute",this)}},["Mute"]),u()(`button.btn.btn-outline-dark.btn-xs.btn-solo${i}`,{onclick:()=>{this.ee.emit("solo",this)}},["Solo"])])),n.volume&&h.push(u()("label.volume",[u()("input.volume-slider",{attributes:{id:"volume-slider","aria-label":"Track volume control",type:"range",min:0,max:100,value:100},hook:new q(this.gain),oninput:t=>{this.ee.emit("volumechange",t.target.value,this)}})])),n.stereoPan&&h.push(u()("label.stereopan",[u()("input.stereopan-slider",{attributes:{id:"stereopan","aria-label":"Track stereo pan control",type:"range",min:-100,max:100,value:100,class:"MuiSlider-root MuiSlider-colorPrimary MuiSlider-sizeMedium css-exkjcx"},hook:new B(this.stereoPan),oninput:t=>{this.ee.emit("stereopan",t.target.value/100,this)}})]))),u()("div.controls",{attributes:{style:`height: ${r*t.height}px; width: ${t.controls.width}px; position: absolute; left: 0; z-index: 10;`}},h)}render(t){let e=this.peaks.length,i=y(t.playbackSeconds,t.resolution,t.sampleRate),s=y(this.startTime,t.resolution,t.sampleRate),r=y(this.endTime,t.resolution,t.sampleRate),n=0,a=this.peaks.data.length,o=Math.ceil(window.devicePixelRatio);i>0&&i>s&&(n=i<r?i-s:e);let l=[u()("div.cursor",{attributes:{style:`position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: ${i}px; bottom: 0; z-index: 5;`}})],h=Object.keys(this.peaks.data).map(i=>{let r=[u()("div.channel-progress",{attributes:{style:`position: absolute; width: ${n}px; height: ${t.height}px; z-index: 2;`}})],a=0,l=e,h=this.peaks.data[i];for(;l>0;){let e=Math.min(l,1e3),i=this.waveOutlineColor?this.waveOutlineColor:t.colors.waveOutlineColor;r.push(u()("canvas",{attributes:{width:e*o,height:t.height*o,style:`float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: ${e}px; height: ${t.height}px;`},hook:new V(h,a,this.peaks.bits,i,o,t.height,t.barWidth,t.barGap)})),l-=e,a+=1e3}if(this.fadeIn){let e=this.fades[this.fadeIn],i=y(e.end-e.start,t.resolution,t.sampleRate);r.push(u()("div.wp-fade.wp-fadein",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${i}px; top: 0; left: 0; z-index: 4;`}},[u()("canvas",{attributes:{width:i,height:t.height},hook:new W(e.type,e.shape,e.end-e.start,t.resolution)})]))}if(this.fadeOut){let e=this.fades[this.fadeOut],i=y(e.end-e.start,t.resolution,t.sampleRate);r.push(u()("div.wp-fade.wp-fadeout",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${i}px; top: 0; right: 0; z-index: 4;`}},[u()("canvas",{attributes:{width:i,height:t.height},hook:new W(e.type,e.shape,e.end-e.start,t.resolution)})]))}return u()(`div.channel.channel-${i}`,{attributes:{style:`height: ${t.height}px; width: ${e}px; top: ${i*t.height}px; left: ${s}px; position: absolute; margin: 0; padding: 0; z-index: 1;`}},r)});if(l.push(h),l.push(this.renderOverlay(t)),!0===t.isActive){let e=y(t.timeSelection.start,t.resolution,t.sampleRate),i=y(t.timeSelection.end,t.resolution,t.sampleRate)-e+1;l.push(u()(`div.selection${i>1?".segment":".point"}`,{attributes:{style:`position: absolute; width: ${i}px; bottom: 0; top: 0; left: ${e}px; z-index: 4;`}}))}let c=u()("div.waveform",{attributes:{style:`height: ${a*t.height}px; position: relative;`}},l),d=[],p=0;t.controls.show&&(d.push(this.renderControls(t)),d.push(u()("span",{attributes:{style:"position: absolute; color: white; background: #2499EF; z-index: 999; padding: 5px 10px; border-radius: 18px; margin-top: 8px; margin-left: 10px; opacity: 0.8;"}},[this.name])),p=t.controls.width),d.push(c);let f=t.shouldPlay?"":".silent",m=void 0===this.customClass?"":`.${this.customClass}`;return u()(`div.channel-wrapper${f}${m}`,{attributes:{style:`margin-left: ${p}px; height: ${t.height*a}px;`}},d)}getTrackDetails(){let t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut,stereoPan:this.stereoPan,gain:this.gain,effects:this.effectsGraph};if(this.fadeIn){let e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){let e=this.fades[this.fadeOut];t.fadeOut={shape:e.shape,duration:e.end-e.start}}return t}};function X(t,e){t.connect(e)}let Y=class{constructor(t,e,i=t.createGain()){this.ac=t,this.gain=1,this.effectsGraph=X,this.masterEffectsGraph=X,this.buffer=e,this.masterGain=i,this.destination=this.ac.destination}applyFade(t,e,i,s="logarithmic"){if(t===$.Y1)(0,$.L7)(this.fadeGain.gain,s,e,i);else if(t===$.h7)(0,$.Mt)(this.fadeGain.gain,s,e,i);else throw Error("Unsupported fade type")}applyFadeIn(t,e,i="logarithmic"){this.applyFade($.Y1,t,e,i)}applyFadeOut(t,e,i="logarithmic"){this.applyFade($.h7,t,e,i)}isPlaying(){return void 0!==this.source}getDuration(){return this.buffer.duration}setAudioContext(t){this.ac=t,this.destination=this.ac.destination}createStereoPanner(){return this.ac.createStereoPanner?this.ac.createStereoPanner():this.ac.createPanner()}setUpSource(){let t,e;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;let i=new Promise(i=>{this.source.onended=()=>{this.source.disconnect(),this.fadeGain.disconnect(),this.volumeGain.disconnect(),this.shouldPlayGain.disconnect(),this.panner.disconnect(),t&&t(),e&&e(),this.source=void 0,this.fadeGain=void 0,this.volumeGain=void 0,this.shouldPlayGain=void 0,this.panner=void 0,i()}});return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.panner=this.createStereoPanner(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.panner),t=this.effectsGraph(this.panner,this.masterGain,this.ac instanceof(window.OfflineAudioContext||window.webkitOfflineAudioContext)),e=this.masterEffectsGraph(this.masterGain,this.destination,this.ac instanceof(window.OfflineAudioContext||window.webkitOfflineAudioContext)),i}setVolumeGainLevel(t){this.volumeGain&&(this.volumeGain.gain.value=t)}setShouldPlay(t){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=t?1:0)}setMasterGainLevel(t){this.masterGain&&(this.masterGain.gain.value=t)}setStereoPanValue(t=0){this.panner&&(void 0!==this.panner.pan?this.panner.pan.value=t:(this.panner.panningModel="equalpower",this.panner.setPosition(t,0,1-Math.abs(t))))}setEffects(t=X){this.effectsGraph=t}setMasterEffects(t=X){this.masterEffectsGraph=t}play(t,e,i){this.source.start(t,e,i)}stop(t=0){this.source&&this.source.stop(t)}};function Z(t){return{id:t.id||I(),start:Number(t.begin)||0,end:Number(t.end)||0,lines:t.lines||[""],lang:t.language||"en"}}let J=class{constructor(t,e={}){this.playlist=t,this.data=e,this.active=!1,this.ondragover=t=>{this.active&&t.preventDefault()}}emitDrag(t){let e=t-this.prevX;if(e){let i=e*this.playlist.samplesPerPixel/this.playlist.sampleRate;this.prevX=t,this.playlist.ee.emit("dragged",i,this.data)}}complete(t){this.emitDrag(t.clientX),this.active=!1,document.removeEventListener("dragover",this.ondragover)}dragstart(t){this.active=!0,this.prevX=t.clientX,t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}dragend(t){this.active&&(t.preventDefault(),this.complete(t))}static getClass(){return".shift"}static getEvents(){return["dragstart","dragend"]}},K=function(){};K.prototype.hook=function(t){let e=t.querySelector(".current");if(e){let i=t.getBoundingClientRect(),s=e.getBoundingClientRect().top-i.top;t.scrollTop+=s}};class Q{constructor(t,e,i=[],s=!1,r=!1,n=!1,a=0,o=null){this.playlist=t,this.marginLeft=a,this.resizeHandlers=[],this.editable=s,this.annotations=e.map(t=>Z(t)),this.setupInteractions(),this.controls=i,this.setupEE(t.ee),this.playlist.isContinuousPlay=n,this.playlist.linkEndpoints=r,this.length=this.annotations.length,this.eventMaker=o}setupInteractions(){this.annotations.forEach((t,e)=>{let i=new J(this.playlist,{direction:"left",index:e}),s=new J(this.playlist,{direction:"right",index:e});this.resizeHandlers.push(i),this.resizeHandlers.push(s)})}setupEE(t){return t.on("addAnnotation",t=>{for(let e of t)this.annotations.push(Z(e));this.setupInteractions(),this.playlist.drawRequest(),this.playlist.draw(this.playlist.render())}),t.on("dragged",(t,e)=>{let i=e.index,s=this.annotations,r=s[i];if("left"===e.direction){let e=r.start;r.start+=t,r.start<0&&(r.start=0),i&&s[i-1].end>r.start&&(s[i-1].end=r.start),this.playlist.linkEndpoints&&i&&s[i-1].end===e&&(s[i-1].end=r.start)}else{let e=r.end;r.end+=t,r.end>this.playlist.duration&&(r.end=this.playlist.duration),i<s.length-1&&s[i+1].start<r.end&&(s[i+1].start=r.end),this.playlist.linkEndpoints&&i<s.length-1&&s[i+1].start===e&&(s[i+1].start=r.end)}this.playlist.drawRequest()}),t.on("continuousplay",t=>{this.playlist.isContinuousPlay=t}),t.on("linkendpoints",t=>{this.playlist.linkEndpoints=t}),t.on("annotationsrequest",()=>{this.export()}),t}export(){let t=this.annotations.map(t=>({begin:String(t.start.toFixed(3)),end:String(t.end.toFixed(3)),id:String(t.id),language:t.lang,lines:t.lines})),e=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`,i=document.createElement("a");document.body.appendChild(i),i.href=e,i.download="annotations.json",i.click(),document.body.removeChild(i)}renderResizeLeft(t){let e=J.getEvents(),i={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},s=this.resizeHandlers[2*t];return e.forEach(t=>{i[`on${t}`]=s[t].bind(s)}),u()("div.resize-handle.resize-w",i)}renderResizeRight(t){let e=J.getEvents(),i={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},s=this.resizeHandlers[2*t+1];return e.forEach(t=>{i[`on${t}`]=s[t].bind(s)}),u()("div.resize-handle.resize-e",i)}renderControls(t,e){let i=this;return this.controls.map(s=>u()(`i.${s.class}`,{attributes:{title:s.title},onclick:()=>{s.action(t,e,i.annotations,{linkEndpoints:i.playlist.linkEndpoints}),this.setupInteractions(),i.playlist.drawRequest()}}))}render(){let t=u()("div.annotations-boxes",{attributes:{style:`height: 30px; position: relative; margin-left: ${this.marginLeft}px;`}},this.annotations.map((t,e)=>{let i=this.playlist.samplesPerPixel,s=this.playlist.sampleRate,r=s/i,n=y(this.playlist.scrollLeft,i,s),a=Math.floor(t.start*r-n),o=Math.ceil(t.end*r-t.start*r);return u()("div.annotation-box",{attributes:{style:`position: absolute; height: 30px; width: ${o}px; left: ${a}px`,"data-id":t.id}},[this.renderResizeLeft(e),u()("span.id",{onclick:()=>{let t=this.annotations[e].start,i=this.annotations[e].end;this.playlist.isContinuousPlay?(this.playlist.seek(t,t),this.playlist.ee.emit("play",t)):(this.playlist.seek(t,i),this.playlist.ee.emit("play",t,i))}},[t.id]),this.renderResizeRight(e)])})),e=u()("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[t]),i=u()("div.annotations-text",{hook:new K},this.annotations.map((t,e)=>{let i=function(t){function e(t,e){let i=parseInt(t/3600,10)%24,s=parseInt(t/60,10)%60,r=(t%60).toFixed(e),n=i<10?`0${i}`:i,a=s<10?`0${s}`:s,o=r<10?`0${r}`:r;return`${n}:${a}:${o}`}return({seconds:t=>t.toFixed(0),thousandths:t=>t.toFixed(3),"hh:mm:ss":function(t){return e(t,0)},"hh:mm:ss.u":function(t){return e(t,1)},"hh:mm:ss.uu":function(t){return e(t,2)},"hh:mm:ss.uuu":function(t){return e(t,3)}})[t]}(this.playlist.durationFormat),s=i(t.start),r=i(t.end),n="";this.playlist.isPlaying()&&this.playlist.playbackSeconds>=t.start&&this.playlist.playbackSeconds<=t.end&&(n=".current");let a=this.editable?{attributes:{contenteditable:!0},oninput:e=>{t.lines=[e.target.innerText]},onkeypress:t=>{(13===t.which||13===t.keyCode)&&(t.target.blur(),t.preventDefault())}}:{};return u()(`div.annotation${n}`,[u()("span.annotation-id",[t.id]),u()("span.annotation-start",[s]),u()("span.annotation-end",[r]),u()("span.annotation-lines",a,[t.lines]),u()("span.annotation-actions",this.renderControls(t,e))])}));return u()("div.annotations",[e,i])}}function tt(){function t(t,e){let i=2**(e-1);return Math.max(-i,Math.min(i-1,t<0?t*i:t*i-1))}onmessage=function(e){let i=function(e,i=1e4,s=8){if(0>[8,16,32].indexOf(s))throw Error("Invalid number of bits specified for peaks.");let r=[],n=e.length;return r.push(function(e,i,s){let r,n,a,o,l;let h=e.length,u=Math.ceil(h/i),c=new self[`Int${s}Array`](2*u);for(let d=0;d<u;d+=1)r=d*i,n=(d+1)*i>h?h:(d+1)*i,o=t((l=function(t){let e,i=1/0,s=-1/0;for(let r=0;r<t.length;r+=1)i>(e=t[r])&&(i=e),s<e&&(s=e);return{min:i,max:s}}(e.subarray(r,n))).min,s),a=t(l.max,s),c[2*d]=o,c[2*d+1]=a;return c}(e.subarray(0,n),i,s)),{bits:s,length:r[0].length/2,data:r}}(e.data.samples,e.data.samplesPerPixel);postMessage(i)}}function te(){let t,e=0,i=[],s=[];function r(t,e,i){for(let s=0;s<i.length;s+=1)t.setUint8(e+s,i.charCodeAt(s))}function n(t,e){let i=new Float32Array(e),s=0;for(let e=0;e<t.length;e+=1)i.set(t[e],s),s+=t[e].length;return i}onmessage=function(a){switch(a.data.command){case"init":t=a.data.config.sampleRate;break;case"record":var o;o=a.data.buffer,i.push(o[0]),s.push(o[1]),e+=o[0].length;break;case"exportWAV":!function(a){let o=function(e,i=!1){let s=new ArrayBuffer(44+2*e.length),n=new DataView(s);return r(n,0,"RIFF"),n.setUint32(4,32+2*e.length,!0),r(n,8,"WAVE"),r(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,i?1:2,!0),n.setUint32(24,t,!0),n.setUint32(28,4*t,!0),n.setUint16(32,4,!0),n.setUint16(34,16,!0),r(n,36,"data"),n.setUint32(40,2*e.length,!0),function(t,e,i){let s=44;for(let e=0;e<i.length;e+=1,s+=2){let r=Math.max(-1,Math.min(1,i[e]));t.setInt16(s,r<0?32768*r:32767*r,!0)}}(n,0,e),n}(function(t,e){let i=t.length+e.length,s=new Float32Array(i),r=0,n=0;for(;r<i;)s[r+=1]=t[n],s[r+=1]=e[n],n+=1;return s}(n(i,e),n(s,e))),l=new Blob([o],{type:a});postMessage(l)}(a.data.type);break;case"clear":e=0,i=[],s=[];break;default:throw Error("Unknown export worker command")}}}let ti=class{constructor(){this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.collapsedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0}initExporter(){this.exportWorker=new(v())(te)}initRecorder(t){this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstart=()=>{let t=new H;t.setName("Recording"),t.setEnabledStates(),t.setEventEmitter(this.ee),this.recordingTrack=t,this.tracks.push(t),this.chunks=[],this.working=!1},this.mediaRecorder.ondataavailable=t=>{if(this.chunks.push(t.data),!this.working){let t=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"});P.createLoader(t,this.ac).load().then(t=>{this.recorderWorker.postMessage({samples:t.getChannelData(0),samplesPerPixel:this.samplesPerPixel}),this.recordingTrack.setCues(0,t.duration),this.recordingTrack.setBuffer(t),this.recordingTrack.setPlayout(new Y(this.ac,t,this.masterGainNode)),this.adjustDuration()}).catch(()=>{this.working=!1}),this.working=!0}},this.mediaRecorder.onstop=()=>{this.chunks=[],this.working=!1},this.recorderWorker=new(v())(tt),this.recorderWorker.onmessage=t=>{this.recordingTrack.setPeaks(t.data),this.working=!1,this.drawRequest()}}setShowTimeScale(t){this.showTimescale=t}setMono(t){this.mono=t}setExclSolo(t){this.exclSolo=t}setSeekStyle(t){this.seekStyle=t}getSeekStyle(){return this.seekStyle}setSampleRate(t){this.sampleRate=t}setSamplesPerPixel(t){this.samplesPerPixel=t}setAudioContext(t){this.ac=t,this.masterGainNode=t.createGain()}getAudioContext(){return this.ac}setControlOptions(t){this.controls=t}setWaveHeight(t){this.waveHeight=t}setCollapsedWaveHeight(t){this.collapsedWaveHeight=t}setColors(t){this.colors=t}setBarWidth(t){this.barWidth=t}setBarGap(t){this.barGap=t}setBorderRadius(t){this.borderRadius=t}setAnnotations(t){let e=this.controls.show?this.controls.width:0;this.annotationList=new Q(this,t.annotations,t.controls,t.editable,t.linkEndpoints,t.isContinuousPlay,e)}setEffects(t){this.effectsGraph=t}setEventEmitter(t){this.ee=t}getEventEmitter(){return this.ee}bla(t){return t}setUpEventEmitter(){let t=this.ee;t.on("sliderTimeUpdate",e=>{let i=Math.floor(e);this.cursor=i,this.seek(i,i,this.tracks[0]),t.emit("timeupdate",e),this.drawRequest()}),t.on("automaticscroll",t=>{this.isAutomaticScroll=t}),t.on("durationformat",t=>{this.durationFormat=t,this.drawRequest()}),t.on("select",(e,i,s)=>{if(this.isPlaying()?(this.lastSeeked=e,this.pausedAt=void 0,this.restartPlayFrom(e)):(this.seek(e,i,s),this.ee.emit("timeupdate",e),this.drawRequest()),e>0&&t.emit("enableSplit",!1),i>e)return t.emit("enableCut",!1);t.emit("enableCut",!0)}),t.on("startaudiorendering",t=>{this.startOfflineRender(t)}),t.on("statechange",t=>{this.setState(t),this.drawRequest()}),t.on("shift",(e,i)=>{i.setStartTime(i.getStartTime()+e),this.adjustDuration(),this.drawRequest(),t.emit("shiftedTrack",{query:i.id,startTime:i.startTime})}),t.on("record",()=>{this.record()}),t.on("play",(t,e)=>{this.play(t,e)}),t.on("pause",()=>{this.pause()}),t.on("stop",()=>{this.stop()}),t.on("rewind",()=>{this.rewind()}),t.on("fastforward",()=>{this.fastForward()}),t.on("clear",()=>{this.clear().then(()=>{this.drawRequest()})}),t.on("solo",t=>{this.soloTrack(t),this.adjustTrackPlayout(),this.drawRequest()}),t.on("mute",t=>{this.muteTrack(t),this.adjustTrackPlayout(),this.drawRequest()}),t.on("removeTrack",e=>{t.emit("removeTrackFromDb",e),this.removeTrack(e),this.adjustTrackPlayout(),this.drawRequest(),0===this.tracks.length&&t.emit("clearAnnotations",()=>console.log(this.tracks.length))}),t.on("changeTrackView",(t,e)=>{this.collapseTrack(t,e),this.drawRequest()}),t.on("volumechange",(t,e)=>{e.setGainLevel(t/100),this.drawRequest()}),t.on("mastervolumechange",t=>{this.masterGain=t/100,this.tracks.forEach(t=>{t.setMasterGainLevel(this.masterGain)})}),t.on("fadein",(e,i)=>{i.setFadeIn(e,this.fadeType),t.emit("saveTracksToLocalStorage",{tracks:this.tracks,stateName:"fadein"}),this.drawRequest()}),t.on("fadeout",(e,i)=>{i.setFadeOut(e,this.fadeType),t.emit("saveTracksToLocalStorage",{tracks:this.tracks,stateName:"fadeout"}),this.drawRequest()}),t.on("stereopan",(t,e)=>{e.setStereoPanValue(t),this.drawRequest()}),t.on("fadetype",t=>{this.fadeType=t}),t.on("newtrack",t=>{if(t.url)return this.load([{src:t.src,name:t.name,id:t.id}]);this.load([{src:t.file,name:t.name,id:t.id}])}),t.on("cut",()=>{let t=this.getActiveTrack(),e=this.getTimeSelection();t.removePart(e.start,e.end,this.ac,t),t.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.setTimeSelection(0,0),this.adjustDuration(),this.drawRequest(),this.ee.emit("cutfinished")}),t.on("razorCut",()=>{let t=this.getActiveTrack(),e=this.getTimeSelection();t.razorCut(e.start,this.ac,t)}),t.on("trim",()=>{let t=this.getActiveTrack(),e=this.getTimeSelection();t.trim(e.start,e.end),t.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.setTimeSelection(0,0),this.adjustDuration(),this.drawRequest()}),t.on("split",()=>{let t=this.getActiveTrack(),e=this.getTimeSelection().start;this.createTrackFromSplit({trackToSplit:t,name:t.name+"_1",splitTime:e,id:I()}),t.trim(t.startTime,e),t.fadeOut&&(t.removeFade(t.fadeOut),t.fadeOut=void 0),t.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.drawRequest()}),t.on("zoomin",()=>{let t=Math.max(0,this.zoomIndex-1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())}),t.on("zoomout",()=>{let t=Math.min(this.zoomLevels.length-1,this.zoomIndex+1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())}),t.on("scroll",()=>{this.isScrolling=!0,this.drawRequest(),clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{this.isScrolling=!1},200)})}load(t){return this.ee.emit("audiosources_rendering"),Promise.all(t.map(t=>P.createLoader(t.src,this.ac,this.ee).load().then(t=>t.sampleRate===this.sampleRate?t:function(t,e){let i=Math.ceil(t.duration*e),s=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(t.numberOfChannels,i,e),r=s.createBufferSource();return r.buffer=t,r.connect(s.destination),r.start(),s.startRendering()}(t,this.sampleRate)))).then(e=>{this.ee.emit("audiosourcesloaded");let i=e.map((e,i)=>{let s=t[i],r=s.id,n=s.name||"Untitled",a=s.start||0,o=s.states||{},l=s.fadeIn,h=s.fadeOut,u=s.cuein||0,c=s.cueout||e.duration,d=s.gain||1,p=s.muted||!1,f=s.soloed||!1,m=s.selected,v=s.peaks||{type:"WebAudio",mono:this.mono},g=s.customClass||void 0,y=s.waveOutlineColor||void 0,b=s.stereoPan||0,k=s.effects||null,w=new Y(this.ac,e,this.masterGainNode),x=new H;return x.src=s.src,x.setBuffer(e),x.setId(r),x.setName(n),x.setEventEmitter(this.ee),x.setEnabledStates(o),x.setCues(u,c),x.setCustomClass(g),x.setWaveOutlineColor(y),void 0!==l&&x.setFadeIn(l.duration,l.shape),void 0!==h&&x.setFadeOut(h.duration,h.shape),void 0!==m&&(this.setActiveTrack(x),this.setTimeSelection(m.start,m.end)),void 0!==v&&x.setPeakData(v),x.setState(this.getState()),x.setStartTime(a),x.setPlayout(w),x.setGainLevel(d),x.setStereoPanValue(b),k&&x.setEffects(k),p&&this.muteTrack(x),f&&this.soloTrack(x),x.calculatePeaks(this.samplesPerPixel,this.sampleRate),x});this.tracks=this.tracks.concat(i),this.adjustDuration(),this.draw(this.render()),this.ee.emit("audiosourcesrendered"),this.ee.emit("getTrackDuration",this.duration)}).catch(t=>{this.ee.emit("audiosourceserror",t)})}createTrackFromSplit({trackToSplit:t,name:e,splitTime:i,id:s}){let r=t.enabledStates,n=t.buffer,a=t.fadeOut,o=t.cueIn,l=t.cueOut,h=t.gain||1,u=!1;-1!==this.mutedTracks.indexOf(t)&&(u=!0);let c=!1;-1!==this.soloedTracks.indexOf(t)&&(c=!0);let d=t.peakData,p=t.customClass,f=t.waveOutlineColor,m=t.stereoPan||0,v=t.effectsGraph||null,g=new Y(this.ac,n,this.masterGainNode),y=new H;if(y.src=t.src,y.setId(s),y.setBuffer(n),y.setName(e),y.setEventEmitter(this.ee),y.setEnabledStates(r),y.setCues(o,l),y.setCustomClass(p),y.setWaveOutlineColor(f),void 0!==a){let e=t.fades[a];y.setFadeOut(e.end-e.start,e.shape)}void 0!==d&&y.setPeakData(d),y.setState(this.getState()),y.setPlayout(g),y.setGainLevel(h),y.setStereoPanValue(m),v&&y.setEffects(v),u&&this.muteTrack(y),c&&this.soloTrack(y),y.setStartTime(t.startTime),y.trim(i,y.endTime),y.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.tracks=this.tracks.concat([y]),this.adjustDuration(),this.draw(this.render()),this.setActiveTrack(y),this.ee.emit("audiosourcesrendered"),this.ee.emit("saveToLocalFromSplit",{trackToSplit:t,track:y})}setActiveTrack(t){this.activeTrack=t}getActiveTrack(){return this.activeTrack}isSegmentSelection(){return this.timeSelection.start!==this.timeSelection.end}setTimeSelection(t=0,e){this.timeSelection={start:t,end:void 0===e?t:e},this.cursor=t}async startOfflineRender(t){if(this.isRendering)return;this.isRendering=!0,this.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(2,44100*this.duration,44100);let e=[];this.ee.emit("audiorenderingstarting",this.offlineAudioContext,e);let i=this.offlineAudioContext.currentTime,s=this.offlineAudioContext.createGain();this.tracks.forEach(t=>{let e=new Y(this.offlineAudioContext,t.buffer,s);e.setEffects(t.effectsGraph),e.setMasterEffects(this.effectsGraph),t.setOfflinePlayout(e),t.schedulePlay(i,0,0,{shouldPlay:this.shouldTrackPlay(t),masterGain:1,isOffline:!0})}),await Promise.all(e);let r=await this.offlineAudioContext.startRendering();"buffer"===t?(this.ee.emit("audiorenderingfinished",t,r),this.isRendering=!1):"wav"===t&&(this.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),this.exportWorker.onmessage=e=>{this.ee.emit("audiorenderingfinished",t,e.data),this.isRendering=!1,this.exportWorker.postMessage({command:"clear"})},this.exportWorker.postMessage({command:"record",buffer:[r.getChannelData(0),r.getChannelData(1)]}),this.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}))}getTimeSelection(){return this.timeSelection}setState(t){this.state=t,this.tracks.forEach(e=>{e.setState(t)})}getState(){return this.state}setZoomIndex(t){this.zoomIndex=t}setZoomLevels(t){this.zoomLevels=t}setZoom(t){this.samplesPerPixel=t,this.zoomIndex=this.zoomLevels.indexOf(t),this.tracks.forEach(e=>{e.calculatePeaks(t,this.sampleRate)})}muteTrack(t){let e=this.mutedTracks.indexOf(t);e>-1?this.mutedTracks.splice(e,1):this.mutedTracks.push(t)}soloTrack(t){let e=this.soloedTracks.indexOf(t);e>-1?this.soloedTracks.splice(e,1):this.exclSolo?this.soloedTracks=[t]:this.soloedTracks.push(t)}collapseTrack(t,e){if(e.collapsed)this.collapsedTracks.push(t);else{let e=this.collapsedTracks.indexOf(t);e>-1&&this.collapsedTracks.splice(e,1)}}removeTrack(t){t.isPlaying()&&t.scheduleStop(),[this.mutedTracks,this.soloedTracks,this.collapsedTracks,this.tracks].forEach(e=>{let i=e.indexOf(t);i>-1&&e.splice(i,1)}),this.adjustDuration(),this.ee.emit("tracksLeft",this.tracks.length)}adjustTrackPlayout(){this.tracks.forEach(t=>{t.setShouldPlay(this.shouldTrackPlay(t))})}adjustDuration(){this.duration=this.tracks.reduce((t,e)=>Math.max(t,e.getEndTime()),0),this.ee.emit("newTimeDurationAfterEdit",this.duration)}shouldTrackPlay(t){let e;return this.soloedTracks.length>0?(e=!1,this.soloedTracks.indexOf(t)>-1&&(e=!0)):(e=!0,this.mutedTracks.indexOf(t)>-1&&(e=!1)),e}isPlaying(){return this.tracks.reduce((t,e)=>t||e.isPlaying(),!1)}getCurrentTime(){return(this.lastSeeked||this.pausedAt||this.cursor)+this.getElapsedTime()}getElapsedTime(){return this.ac.currentTime-this.lastPlay}setMasterGain(t){this.ee.emit("mastervolumechange",t)}restartPlayFrom(t,e){return this.stopAnimation(),this.tracks.forEach(t=>{t.scheduleStop()}),Promise.all(this.playoutPromises).then(this.play.bind(this,t,e))}play(t,e){clearTimeout(this.resetDrawTimer);let i=this.ac.currentTime,s=this.getTimeSelection(),r=[],n=0===t?0:t||this.pausedAt||this.cursor,a=e;return(!a&&s.end!==s.start&&s.end>n&&(a=s.end),this.isPlaying())?this.restartPlayFrom(n,a):(this.effectsGraph&&this.tracks&&this.tracks[0].playout.setMasterEffects(this.effectsGraph),this.tracks.forEach(t=>{t.setState("cursor"),r.push(t.schedulePlay(i,n,a,{shouldPlay:this.shouldTrackPlay(t),masterGain:this.masterGain}))}),this.lastPlay=i,this.playoutPromises=r,this.startAnimation(n),Promise.all(this.playoutPromises))}pause(){return this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):Promise.all(this.playoutPromises)}stop(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}playbackReset(){return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach(t=>{t.scheduleStop(),t.setState(this.getState())}),this.masterGainNode.disconnect(),this.drawRequest(),Promise.all(this.playoutPromises)}rewind(){return this.stop().then(()=>{this.scrollLeft=0,this.ee.emit("select",0,0)})}fastForward(){return this.stop().then(()=>{this.viewDuration<this.duration?this.scrollLeft=this.duration-this.viewDuration:this.scrollLeft=0,this.ee.emit("select",this.duration,this.duration)})}clear(){return this.stop().then(()=>{this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.seek(0,0,void 0)})}record(){let t=[];this.mediaRecorder.start(300),this.tracks.forEach(e=>{e.setState("none"),t.push(e.schedulePlay(this.ac.currentTime,0,void 0,{shouldPlay:this.shouldTrackPlay(e)}))}),this.playoutPromises=t}startAnimation(t){this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame(()=>{this.updateEditor(t)})}stopAnimation(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}seek(t,e,i){this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.setActiveTrack(i||this.tracks[0]),this.pausedAt=t,this.setTimeSelection(t,e),"fill"===this.getSeekStyle()&&(this.playbackSeconds=t))}updateEditor(t){let e=this.ac.currentTime,i=this.getTimeSelection(),s=t||this.cursor,r=e-this.lastDraw;if(this.isPlaying()){let t=s+r;this.ee.emit("timeupdate",t),this.animationRequest=window.requestAnimationFrame(()=>{this.updateEditor(t)}),this.playbackSeconds=t,this.draw(this.render()),this.lastDraw=e}else s+r>=(this.isSegmentSelection()?i.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout(()=>{this.ee.emit("fnishedPlaying"),this.pausedAt=void 0,this.lastSeeked=void 0,this.setState(this.getState()),this.playbackSeconds=0,this.draw(this.render())},0)}drawRequest(){window.requestAnimationFrame(()=>{this.draw(this.render())})}draw(t){let e=d()(this.tree,t);this.rootNode=f()(this.rootNode,e),this.tree=t,this.viewDuration=(this.rootNode.clientWidth-this.controls.width)*this.samplesPerPixel/this.sampleRate}getTrackRenderData(t={}){let e={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors,barWidth:this.barWidth,barGap:this.barGap,borderRadius:this.borderRadius};return r()({},t,e)}isActiveTrack(t){let e=this.getActiveTrack();return!this.isSegmentSelection()||e===t}renderAnnotations(){return this.annotationList.render()}renderTimeScale(){let t=this.controls.show?this.controls.width:0;return new O(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,t,this.colors).render()}renderTrackSection(){let t=this.tracks.map(t=>{let e=this.collapsedTracks.indexOf(t)>-1;return t.render(this.getTrackRenderData({isActive:this.isActiveTrack(t),shouldPlay:this.shouldTrackPlay(t),soloed:this.soloedTracks.indexOf(t)>-1,muted:this.mutedTracks.indexOf(t)>-1,collapsed:e,height:e?this.collapsedWaveHeight:this.waveHeight,barGap:this.barGap,barWidth:this.barWidth,borderRadius:this.borderRadius}))});return u()("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:t=>{this.scrollLeft=t.target.scrollLeft*this.samplesPerPixel/this.sampleRate,this.ee.emit("scroll")},hook:new T(this)},t)}render(){let t=[];return this.showTimescale&&t.push(this.renderTimeScale()),t.push(this.renderTrackSection()),t.push(this.renderAnnotations()),u()("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},t)}getInfo(){let t=[];return this.tracks.forEach(e=>{t.push(e.getTrackDetails())}),{tracks:t,effects:this.effectsGraph}}};function ts(t={},e=l()()){if(void 0===t.container)throw Error("DOM element container must be given.");let i=r()({},t,{samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150,widgets:{muteOrSolo:!0,volume:!0,stereoPan:!0,collapse:!0,remove:!0}},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,collapsedWaveHeight:30,barWidth:1,barGap:0,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1}),s=i.zoomLevels.indexOf(i.samplesPerPixel);if(-1===s)throw Error("initial samplesPerPixel must be included in array zoomLevels");let n=new ti,o=i.ac||new AudioContext;n.config=i.annotationList,n.setAudioContext(o),n.setSampleRate(i.sampleRate||o.sampleRate),n.setSamplesPerPixel(i.samplesPerPixel),n.setEventEmitter(e),n.setUpEventEmitter(),n.setTimeSelection(0,0),n.setState(i.state),n.setControlOptions(i.controls),n.setWaveHeight(i.waveHeight),n.setCollapsedWaveHeight(i.collapsedWaveHeight),n.setColors(i.colors),n.setZoomLevels(i.zoomLevels),n.setZoomIndex(s),n.setMono(i.mono),n.setExclSolo(i.exclSolo),n.setShowTimeScale(i.timescale),n.setSeekStyle(i.seekStyle),n.setAnnotations(i.annotationList),n.setBarGap(i.barGap),n.setBorderRadius(i.borderRadius),n.setBarWidth(i.barWidth),n.isAutomaticScroll=i.isAutomaticScroll,n.isContinuousPlay=i.isContinuousPlay,n.linkedEndpoints=i.linkedEndpoints,i.effects&&n.setEffects(i.effects);let h=n.render(),u=a()(h);return i.container.appendChild(u),n.tree=h,n.rootNode=u,n}function tr(t={},e=l()()){return ts(t,e)}})(),s})()}}]);